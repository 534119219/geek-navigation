{"version":3,"file":"pages/admin/index.js","sources":["webpack:///./pages/admin/index.vue?87ca","webpack:///./pages/admin/index.vue?6035","webpack:///./pages/admin/index.vue?55f9","webpack:///./pages/admin/index.vue","webpack:///./pages/admin/index.vue?ef40","webpack:///./pages/admin/index.vue?8ab2","webpack:///./pages/admin/index.vue?8228"],"sourcesContent":["import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6de17fba&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6de17fba&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".el-table[data-v-6de17fba]{margin-top:20px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('admin-layout',[_c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_c('el-select',{attrs:{\"placeholder\":\"请选择状态\"},model:{value:(_vm.selectedStatus),callback:function ($$v) {_vm.selectedStatus=$$v},expression:\"selectedStatus\"}},_vm._l((_vm.status),function(item){return _c('el-option',{key:item.value,attrs:{\"value\":item.value,\"label\":item.label}})}),1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.clear}},[_vm._v(\"一键拒绝审核列表\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"label\":\"提交日期\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"el-icon-time\"}),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.$dayjs(scope.row.createAt).format(\"YYYY-MM-DD HH:ss\"))+\"\\n          \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"网站名称\",\"width\":\"180\",\"prop\":\"name\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"网站描述\",\"width\":\"180\",\"prop\":\"desc\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"网站链接\",\"width\":\"180\",\"prop\":\"url\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(!scope.row.status)?_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.openDialog(0, scope.row._id, scope.$index)}}},[_vm._v(\"\\n            通过\\n          \")]):_vm._e(),_vm._v(\" \"),(!scope.row.status)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.openDialog(1, scope.row._id, scope.$index)}}},[_vm._v(\"\\n            拒绝\\n          \")]):_vm._e()]}}])})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport adminLayout from \"~/layouts/admin-layout\";\nimport api from \"~/api\";\n\nexport default {\n  components: {\n    adminLayout\n  },\n  data() {\n    return {\n      loading: false,\n      status: [\n        { value: 0, label: \"审核中\" },\n        { value: 1, label: \"已通过\" },\n        { value: 2, label: \"已拒绝\" }\n      ],\n      selectedStatus: 0,\n      isNavPopup: false,\n      editItem: {},\n      active: 0,\n      tableData: [],\n      tableNavData: [],\n      activeName: \"two\"\n    };\n  },\n  methods: {\n    async getData(status) {\n      this.loading = true;\n      const res = await this.$api.getAuditList(status);\n      this.tableData = res.data;\n      this.loading = false;\n    },\n    // 拒绝－直接删除提交\n    async delAuditNav(id) {\n      const res = await this.$api.delAuditNav({ id: id });\n    },\n    // 新增－展示到前台\n    async addNav(data) {\n      const res = await this.$api.addNav(data);\n    },\n    openDialog(type, id, index) {\n      const that = this;\n      if (type) {\n        // 拒绝\n        this.$confirm(\"确认拒绝这个提交？\")\n          .then(_ => {\n            this.$message(\"删除成功\");\n            this.delAuditNav(id);\n            this.tableData.splice(index, 1);\n          })\n          .catch(_ => {});\n      } else {\n        let filterData = this.tableData.filter(item => item._id == id)[0];\n        filterData.auditId = filterData._id;\n        this.$confirm(\"确认添加到首页？\")\n          .then(_ => {\n            this.$message(\"添加成功\");\n            this.addNav(filterData);\n            this.tableData.splice(index, 1);\n          })\n          .catch(_ => {});\n      }\n    },\n    clear() {\n      this.$confirm(\"确认清空审核列表？\").then(res => {\n        this.$api.fastRejectAudit();\n        this.getData();\n      });\n    }\n  },\n  watch: {\n    selectedStatus(val) {\n      this.getData(val);\n    }\n  },\n  async asyncData() {\n    const res = await api.getAuditList()\n    return {\n      tableData: res.data\n    }\n  }\n};\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6de17fba&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.vue?vue&type=style&index=0&id=6de17fba&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"6de17fba\",\n  \"69030e84\"\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6de17fba&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"5dc81bdc\", content, true, context)\n};"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAeA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;AA6CA;AACA;AACA;AACA;AACA;AAJA;AACA;AAIA;AACA;AACA;AACA;AADA;AAGA;AACA;AA7EA;;ACtEA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}