{"version":3,"file":"pages/admin/list.js","sources":["webpack:///./components/AddNavPopup.vue?3dbd","webpack:///./components/AddNavPopup.vue","webpack:///./components/AddNavPopup.vue?67f9","webpack:///./components/AddNavPopup.vue?bd62","webpack:///./pages/admin/list.vue?b756","webpack:///./pages/admin/list.vue?5873","webpack:///./pages/admin/list.vue?8e72","webpack:///./pages/admin/list.vue","webpack:///./pages/admin/list.vue?51b7","webpack:///./pages/admin/list.vue?93e2","webpack:///./components/AddNavPopup.vue?5578","webpack:///./components/AddNavPopup.vue?a8be","webpack:///./components/AddNavPopup.vue?3e77","webpack:///./pages/admin/list.vue?ba1d"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-nav-warp\"},[_c('el-dialog',{attrs:{\"title\":\"添加网站\",\"visible\":_vm.show,\"width\":\"320\"},on:{\"update:visible\":function($event){_vm.show=$event},\"close\":function($event){return _vm.$emit('update:show', false)}}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"label-width\":\"100px\",\"model\":_vm.form,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"网站链接\",\"prop\":\"url\"}},[_c('el-input',{attrs:{\"placeholder\":\"http://www.baidu.com/\",\"disabled\":_vm.type === 'update'},model:{value:(_vm.form.url),callback:function ($$v) {_vm.$set(_vm.form, \"url\", $$v)},expression:\"form.url\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"网站分类\",\"prop\":\"categoryId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"filterable\":\"\"},model:{value:(_vm.form.categoryId),callback:function ($$v) {_vm.$set(_vm.form, \"categoryId\", $$v)},expression:\"form.categoryId\"}},_vm._l((_vm.categorys),function(group){return _c('el-option-group',{key:group._id,attrs:{\"label\":group.name}},_vm._l((group.children),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item._id}})}),1)}),1)],1),_vm._v(\" \"),(_vm.isError)?_c('el-form-item',{attrs:{\"label\":\"网站名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入网站名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.isError)?_c('el-form-item',{attrs:{\"label\":\"网站描述\",\"prop\":\"desc\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入网站描述\"},model:{value:(_vm.form.desc),callback:function ($$v) {_vm.$set(_vm.form, \"desc\", $$v)},expression:\"form.desc\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addNav('ruleForm')}}},[_vm._v(\"\\n          提交\\n        \")]),_vm._v(\" \"),_c('p',[_vm._v(\"提交后爬虫会自动补全网站信息\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    show: {\n      type: Boolean,\n      default: false,\n    },\n    type: {\n      validator: function(value = 'create') {\n        // 这个值必须匹配下列字符串中的一个\n        return ['create', 'update'].indexOf(value) !== -1\n      },\n    },\n    item: Object,\n  },\n  data() {\n    return {\n      categorys: [],\n      form: {\n        url: '',\n        categoryId: '',\n        name: '',\n        desc: '',\n      },\n      rules: {\n        url: [\n          { required: true, message: '请输入url', trigger: 'blur' },\n          {\n            pattern: /(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&:/~\\+#]*[\\w\\-\\@?^=%&/~\\+#])?/,\n            message: '请输入正确的url',\n          },\n        ],\n        categoryId: [\n          { required: true, message: '请选择分类', trigger: 'blur' },\n        ],\n        name: [],\n        desc: [],\n      },\n      isError: false,\n    }\n  },\n  methods: {\n    async getCategorys() {\n      const { data } = await this.$api.getCategoryList()\n      this.categorys = data\n    },\n    async addNav(formName) {\n      this.$refs[formName].validate(async (valid) => {\n        if (valid) {\n          // 判断编辑还是更新\n          if (this.type === 'update') {\n            const id = this.item._id\n            const res = await this.$api.editNav({\n              id,\n              ...this.form\n            })\n          } else {\n            const res = await this.$api.addAudit(this.form)\n            if (res.msg) {\n              this.$message.error(`${res.msg}，请手动输入！`)\n              this.isError = true\n              return false\n            }\n            this.$message(`感谢您的提交，请等待后台审核通过！`)\n          }\n          this.form = {}\n\n          this.$emit('update:show', false)\n          this.$emit('submit')\n        } else {\n          return false\n        }\n      })\n    },\n  },\n  watch: {\n    item(ite) {\n      this.isError = true\n      this.form.name = ite.name\n      this.form.url = ite.href\n      this.form.desc = ite.desc\n      this.form.categoryId = ite.categoryId\n    },\n  },\n  created() {\n    this.getCategorys()\n  },\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddNavPopup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddNavPopup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddNavPopup.vue?vue&type=template&id=45142bea&scoped=true&\"\nimport script from \"./AddNavPopup.vue?vue&type=script&lang=js&\"\nexport * from \"./AddNavPopup.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./AddNavPopup.vue?vue&type=style&index=0&id=45142bea&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"45142bea\",\n  \"46d06b8a\"\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=20480b66&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=20480b66&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".title[data-v-20480b66]{text-align:left;font-size:14px;line-height:normal;margin:20px 0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('adminLayout',[_c('div',[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"label\":\"网站名字\",\"width\":\"180\",\"prop\":\"name\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"网站链接\",\"width\":\"180\",\"prop\":\"href\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"网站描述\",\"width\":\"180\",\"prop\":\"desc\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.row)}}},[_vm._v(\"\\n            修改\\n          \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row._id)}}},[_vm._v(\"\\n            删除\\n          \")])]}}])})],1),_vm._v(\" \"),_c('AddNavPopup',{attrs:{\"show\":_vm.show,\"item\":_vm.editItem,\"type\":\"update\"},on:{\"update:show\":function($event){_vm.show=$event},\"submit\":_vm.getData}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport AddNavPopup from \"@/components/AddNavPopup\";\nimport adminLayout from \"~/layouts/admin-layout\";\n\nexport default {\n  components: {\n    AddNavPopup,\n    adminLayout\n  },\n  data() {\n    return {\n      loading: false,\n      show: false,\n      editItem: {},\n      active: 0,\n      tableData: [],\n      activeName: \"two\"\n    };\n  },\n  methods: {\n    async getData() {\n      this.loading = true;\n      const res = await this.$api.getHome();\n      this.tableData = res;\n      this.loading = false;\n    },\n    handleEdit(item) {\n      this.show = true;\n      this.editItem = item;\n    },\n    async handleDelete(id) {\n      const data = await this.$api.delNav(id);\n      this.$message(\"删除成功\");\n      this.getData();\n    }\n  },\n  created() {\n    this.getData();\n  }\n};\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=20480b66&scoped=true&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./list.vue?vue&type=style&index=0&id=20480b66&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"20480b66\",\n  \"60847362\"\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddNavPopup.vue?vue&type=style&index=0&id=45142bea&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"5cfed743\", content, true, context)\n};","import mod from \"-!../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddNavPopup.vue?vue&type=style&index=0&id=45142bea&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddNavPopup.vue?vue&type=style&index=0&id=45142bea&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".el-icon-folder-add[data-v-45142bea]{margin-right:5px}.el-dialog[data-v-45142bea]{min-width:320px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=20480b66&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"3d09bd7e\", content, true, context)\n};"],"mappings":";;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAXA;AACA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAKA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAZA;AAcA;AAtBA;AAwBA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AACA;AAQA;AACA;AACA;AACA;AAtFA;;ACjDA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAFA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAhBA;AACA;AAgBA;AACA;AACA;AACA;AAnCA;;ACjDA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}